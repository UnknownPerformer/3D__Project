{"version":3,"sources":["select.js"],"names":["getTemplate","data","placeholder","selectedId","text","items","map","item","cls","id","value","join","Select","selector","options","$el","document","querySelector","event","type","target","dataset","toggle","select","close","classList","contains","find","$value","textContent","current","querySelectorAll","forEach","el","remove","add","isOpen","open","$arrow","removeEventListener","clickHandler","innerHTML","bind","addEventListener"],"mappings":"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","file":"select.03b37f95.js","sourceRoot":"..\\src","sourcesContent":["const getTemplate = (data = [], placeholder, selectedId) => {\r\n    let text = placeholder ?? 'Placeholder по умолчанию'\r\n\r\n    const items = data.map(item => {\r\n        let cls = ''\r\n        if (item.id === selectedId) {\r\n            text = item.value\r\n            cls = 'selected'\r\n        }\r\n        return `\r\n      <li class=\"select__item ${cls}\" data-type=\"item\" data-id=\"${item.id}\">${item.value}</li>\r\n    `\r\n    })\r\n\r\n    return `\r\n    <div class=\"select__backdrop\" data-type=\"backdrop\"></div>\r\n    <div class=\"select__input\" data-type=\"input\">\r\n      <span data-type=\"value\">${text}</span>\r\n      <i class=\"fa fa-chevron-down\" data-type=\"arrow\"></i>\r\n    </div>\r\n    <div class=\"select__dropdown\">\r\n      <ul class=\"select__list\">\r\n        ${items.join('')}\r\n      </ul>\r\n    </div>\r\n  `\r\n}\r\n\r\nexport class Select {\r\n    constructor(selector, options) {\r\n        this.$el = document.querySelector(selector)\r\n        this.options = options\r\n        this.selectedId = options.selectedId\r\n\r\n        this.#render()\r\n        this.#setup()\r\n    }\r\n\r\n    #render() {\r\n        const {placeholder, data} = this.options\r\n        this.$el.classList.add('select')\r\n        this.$el.innerHTML = getTemplate(data, placeholder, this.selectedId)\r\n    }\r\n\r\n    #setup() {\r\n        this.clickHandler = this.clickHandler.bind(this)\r\n        this.$el.addEventListener('click', this.clickHandler)\r\n        this.$arrow = this.$el.querySelector('[data-type=\"arrow\"]')\r\n        this.$value = this.$el.querySelector('[data-type=\"value\"]')\r\n    }\r\n\r\n    clickHandler(event) {\r\n        const {type} = event.target.dataset\r\n\r\n        if (type === 'input') {\r\n            this.toggle()\r\n        } else if (type === 'item') {\r\n            const id = event.target.dataset.id\r\n            this.select(id)\r\n        } else if (type === 'backdrop') {\r\n            this.close()\r\n        }\r\n    }\r\n\r\n    get isOpen() {\r\n        return this.$el.classList.contains('open')\r\n    }\r\n\r\n    get current() {\r\n        return this.options.data.find(item => item.id === this.selectedId)\r\n    }\r\n\r\n    select(id) {\r\n        this.selectedId = id\r\n        this.$value.textContent = this.current.value\r\n\r\n        this.$el.querySelectorAll('[data-type=\"item\"]').forEach(el => {\r\n            el.classList.remove('selected')\r\n        })\r\n        this.$el.querySelector(`[data-id=\"${id}\"]`).classList.add('selected')\r\n\r\n\r\n        this.close()\r\n    }\r\n\r\n    toggle() {\r\n        this.isOpen ? this.close() : this.open()\r\n    }\r\n\r\n    open() {\r\n        this.$el.classList.add('open')\r\n        this.$arrow.classList.remove('fa-chevron-down')\r\n        this.$arrow.classList.add('fa-chevron-up')\r\n    }\r\n\r\n    close() {\r\n        this.$el.classList.remove('open')\r\n        this.$arrow.classList.add('fa-chevron-down')\r\n        this.$arrow.classList.remove('fa-chevron-up')\r\n    }\r\n\r\n    destroy() {\r\n        this.$el.removeEventListener('click', this.clickHandler)\r\n        this.$el.innerHTML = ''\r\n    }\r\n}"]}